{"title":"linux部署与nginx代理","slug":"linux部署与nginx代理","date":"2018-07-05T01:01:30.000Z","updated":"2018-07-09T02:30:14.177Z","comments":true,"path":"api/articles/linux部署与nginx代理.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>总结一下自己在linux(<code>以下以centos7.2为例</code>)下部署网站所遇到的问题以及感想。<code>(linux系统、nginx基本知识就不展开讲了)</code></p>\n<h3 id=\"静态网站部署\"><a href=\"#静态网站部署\" class=\"headerlink\" title=\"静态网站部署\"></a>静态网站部署</h3><ol>\n<li>安装好linux系统以及<code>vim</code>、<code>nginx</code>等等常用软件</li>\n<li>进入 <code>/etc/nginx/conf.d</code> 目录，一般会有个<code>default.conf</code>配置文件。以你的工程名新建一个<code>.conf文件</code>,内容同<code>default.conf</code>相同。</li>\n<li>配置<code>.conf</code>文件(详情配置说明见<a href=\"https://blog.csdn.net/u010320371/article/details/78995097\" target=\"_blank\" rel=\"noopener\">.conf</a>)</li>\n<li>location 配置(以<code>sell</code>工程为例)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /sell/ &#123;</span><br><span class=\"line\">  rewrite ^/server_name/sell/index.html  //server_name为你的IP或者域名</span><br><span class=\"line\">  root   /data/www;  //项目路径位置</span><br><span class=\"line\">  index  index.html index.htm;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"nginx服务代理\"><a href=\"#nginx服务代理\" class=\"headerlink\" title=\"nginx服务代理\"></a>nginx服务代理</h3><blockquote>\n<p>以我之前的球球音乐为例</p>\n</blockquote>\n<ol>\n<li>安装node.js、pm2</li>\n<li>修改你前台请求node地址为服务器的IP或者域名</li>\n<li>后面步骤与静态部署相同</li>\n<li>pm2启动express文件</li>\n<li>location配置<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location /qqmusic/ &#123;</span><br><span class=\"line\">  rewrite ^/server_name/qqmusic/index.html  //server_name为你的IP或者域名</span><br><span class=\"line\">  proxy_set_header X-RealIP $remote_addr;</span><br><span class=\"line\">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">  proxy_set_header Host $http_host;</span><br><span class=\"line\">  proxy_set_header X-Nginx-Proxy true;</span><br><span class=\"line\">  proxy_pass http://127.0.0.1:4000/; // 这里的端口要和你的node服务端口相同</span><br><span class=\"line\">  root   /data/www;  //项目路径位置</span><br><span class=\"line\">  index  index.html index.htm;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"以后再补充\"><a href=\"#以后再补充\" class=\"headerlink\" title=\"以后再补充\"></a>以后再补充</h3><h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2>","categories":[{"name":"前端","slug":"前端","count":5,"path":"api/categories/前端.json"}],"tags":[{"name":"Node.js","slug":"Node-js","count":1,"path":"api/tags/Node-js.json"},{"name":"Linux","slug":"Linux","count":1,"path":"api/tags/Linux.json"},{"name":"Nginx","slug":"Nginx","count":1,"path":"api/tags/Nginx.json"}]}